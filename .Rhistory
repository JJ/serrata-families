library(jsonlite)
library(networkD3)
fcmn <- fromJSON("data/extensions-rakudo.json")
sankeyNetwork(Links = fcmn$links, Nodes = fcmn$nodes, Source = "source",
Target = "target", Value = "weight", NodeID = "name",
fontSize = 12, nodeWidth = 30, sinksRight=T)
data
install.packages("usethis")
usethis::use_author(given="JJ",family="Merelo",email="jjmerelo@gmail.com",comment=c(ORCID="0000-0002-1385-9741"))
pwd
pwd()
cwd()
cd("Papers/2024/serrata.families")
chdir("Papers/2024/serrata.families")
setwd("~/Papers/2024/serrata.families")
usethis::use_author(given="JJ",family="Merelo",email="jjmerelo@gmail.com",comment=c(ORCID="0000-0002-1385-9741"))
usethis::use_author(given="JJ",family="Merelo",email="jjmerelo@gmail.com",comment=c(ORCID="0000-0002-1385-9741"))
require(igraph)
require(dupNodes)
require(serrata.families)
pre.serrata <- colleganza.slice(to=1261)
readRDS("../data/great-council-families.rds")
V(pre.serrata)$betweenness <- betweenness(pre.serrata)
plot(pre.serrata, vertex.size=V(pre.serrata)$betweenness/200, vertex.color=V(pre.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza graph")
V(pre.serrata)$betweenness <- betweenness(pre.serrata)
V(pre.serrata)$color <- "yellow"
V(pre.serrata)[V(pre.serrata)$name %in% great.council.families]$color <- rgb(0.7,0,0,0.5)
plot(pre.serrata, vertex.size=V(pre.serrata)$betweenness/200, vertex.color=V(pre.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza graph")
post.serrata <- colleganza.slice(from=1310)
V(post.serrata)$betweenness <- betweenness(post.serrata)
V(post.serrata)$color <- "yellow"
V(post.serrata)[V(post.serrata)$name %in% great.council.families]$color <- rgb(0.7,0,0,0.5)
plot(post.serrata, vertex.size=V(post.serrata)$betweenness/200, vertex.color=V(post.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza graph")
plot(pre.serrata, vertex.size=V(pre.serrata)$betweenness/200, vertex.color=V(pre.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza graph, pre-serrata")
pre.serrata <- simplify(pre.serrata, edge.attr.comb=list(weight="sum"))
E(pre.serrata)$weight <- 1
pre.serrata <- simplify(pre.serrata, edge.attr.comb=list(weight="sum"))
pre.serrata.communities <- cluster_edge_betweenness(pre.serrata)
plot(pre.serrata.communities, pre.serrata, vertex.size=V(pre.serrata)$betweenness/200, vertex.color=V(pre.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza communities, pre-serrata"
plot(pre.serrata.communities, pre.serrata, vertex.size=V(pre.serrata)$betweenness/200, vertex.color=V(pre.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza communities, pre-serrata")
plot(pre.serrata.communities, pre.serrata, vertex.size=V(pre.serrata)$betweenness/200, vertex.color=V(pre.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza communities, pre-serrata")
pre.serrata.communities
plot(pre.serrata.communities, pre.serrata, vertex.size=V(pre.serrata)$betweenness/200, vertex.color=V(pre.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza communities, pre-serrata")
View(pre.serrata.communities)
pre.serrata.communities[1]
pre.serrata.communities[2]
pre.serrata.communities[3]
pre.serrata.communities[4]
pre.serrata.communities[5]
pre.serrata.communities[6]
pre.serrata.communities[7]
pre.serrata.communities[8]
pre.serrata.components <- igraph::components(pre.serrata, mode="weak")
pre.serrata.biggest_cluster_id <- which.max(pre.serrata.components$csize)
pre.serrata.vert_ids <- V(pre.serrata)[pre.serrata.components$membership == pre.serrata.biggest_cluster_id]
connected.pre.serrata <- induced_subgraph(pre.serrata, pre.serrata.vert_ids)
pre.serrata.communities <- cluster_edge_betweenness(connected.pre.serrata)
pre.serrata.components <- igraph::components(pre.serrata, mode="weak")
pre.serrata.biggest_cluster_id <- which.max(pre.serrata.components$csize)
pre.serrata.vert_ids <- V(pre.serrata)[pre.serrata.components$membership == pre.serrata.biggest_cluster_id]
connected.pre.serrata <- induced_subgraph(pre.serrata, pre.serrata.vert_ids)
pre.serrata.communities <- cluster_edge_betweenness(connected.pre.serrata)
plot(connected.pre.serrata)
View(pre.serrata.communities)
View(connected.pre.serrata)
pre.serrata.communities <- cluster_edge_betweenness(pre.serrata)
pre.serrata <- colleganza.slice(to=1261)
V(pre.serrata)$betweenness <- betweenness(pre.serrata)
V(pre.serrata)$color <- "yellow"
V(pre.serrata)[V(pre.serrata)$name %in% great.council.families]$color <- rgb(0.7,0,0,0.5)
plot(pre.serrata, vertex.size=V(pre.serrata)$betweenness/200, vertex.color=V(pre.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza graph, pre-serrata")
pre.serrata.components <- igraph::components(pre.serrata, mode="weak")
pre.serrata.biggest_cluster_id <- which.max(pre.serrata.components$csize)
pre.serrata.vert_ids <- V(pre.serrata)[pre.serrata.components$membership == pre.serrata.biggest_cluster_id]
connected.pre.serrata <- induced_subgraph(pre.serrata, pre.serrata.vert_ids)
pre.serrata.communities <- cluster_edge_betweenness(pre.serrata)
pre.serrata <- colleganza.slice(to=1261)
V(pre.serrata)$betweenness <- betweenness(pre.serrata)
V(pre.serrata)$color <- "yellow"
V(pre.serrata)[V(pre.serrata)$name %in% great.council.families]$color <- rgb(0.7,0,0,0.5)
plot(pre.serrata, vertex.size=V(pre.serrata)$betweenness/200, vertex.color=V(pre.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza graph, pre-serrata")
pre.serrata.communities <- cluster_edge_betweenness(pre.serrata)
require(dupNodes)
require(igraph)
require(dupNodes)
require(serrata.families)
pre.serrata <- colleganza.slice(to=1261)
V(pre.serrata)$betweenness <- betweenness(pre.serrata)
V(pre.serrata)$color <- "yellow"
V(pre.serrata)[V(pre.serrata)$name %in% great.council.families]$color <- rgb(0.7,0,0,0.5)
plot(pre.serrata, vertex.size=V(pre.serrata)$betweenness/200, vertex.color=V(pre.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza graph, pre-serrata")
pre.serrata.communities <- cluster_edge_betweenness(pre.serrata)
pre.serrata
E(pre.serrata)$weight <- 1
pre.serrata <- simplify(pre.serrata,edge.attr.comb=list(weight("sum")))
pre.serrata <- simplify(pre.serrata,edge.attr.comb=list(weight="sum"))
pre.serrata.components <- igraph::components(pre.serrata, mode="weak")
pre.serrata.biggest_cluster_id <- which.max(pre.serrata.components$csize)
pre.serrata.vert_ids <- V(pre.serrata)[pre.serrata.components$membership == pre.serrata.biggest_cluster_id]
connected.pre.serrata <- induced_subgraph(pre.serrata, pre.serrata.vert_ids)
pre.serrata.communities <- cluster_edge_betweenness(connected.pre.serrata)
E(connected.pre.serrata)$weight <- 1
connected.pre.serrata <- simplify(connected.pre.serrata,edge.attr.comb=list(weight="sum"))
E(connected.pre.serrata)
connected.pre.serrata <- simplify(connected.pre.serrata,edge.attr.comb="sum")
E(connected.pre.serrata)
E(connected.pre.serrata)$weight <- 1
E(connected.pre.serrata)$weight
simplify(connected.pre.serrata,edge.attr.comb="sum")
E(connected.pre.serrata)$weight <- 1
simplify(connected.pre.serrata,edge.attr.comb=list(weight=sum))
simplify(connected.pre.serrata,edge.attr.comb=list(weight="sum"))
E(connected.pre.serrata)
pre.serrata <- colleganza.slice(to=1261)
V(pre.serrata)$betweenness <- betweenness(pre.serrata)
V(pre.serrata)$color <- "yellow"
V(pre.serrata)[V(pre.serrata)$name %in% great.council.families]$color <- rgb(0.7,0,0,0.5)
plot(pre.serrata, vertex.size=V(pre.serrata)$betweenness/200, vertex.color=V(pre.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza graph, pre-serrata")
E(pre.serrata)
E(pre.serrata)$weight <- 1
E(pre.serrata)
simplify(pre.serrata,edge.attr.comb = list(weight="sum"))
v(pre.serrata)
V(pre.serrata)
pre.serrata.no.self.loops <- simplify(pre.serrata)
E(pre.serrata.no.self.loops)$weight <- 1
simplify(pre.serrata.no.self.loops,edge.attr.comb = list(weight="sum"))
connected.simplified.pre.serrata <- simplify(connected.pre.serrata)
E(connected.simplified.pre.serrata)$weight <- 1
connected.simplified.pre.serrata <- simplify(connected.simplified.pre.serrata,edge.attr.comb=list(weight="sum"))
pre.serrata.communities <- cluster_edge_betweenness(connected.simplified.pre.serrata)
connected.simplified.pre.serrata <- simplify(connected.simplified.pre.serrata,edge.attr.comb=list(weight="sum"))
simplify(connected.simplified.pre.serrata,edge.attr.comb=list(weight="sum"))
connected.simplified.pre.serrata <- simplify(connected.pre.serrata)
E(connected.simplified.pre.serrata)$weight <- 1
simplify(connected.simplified.pre.serrata,edge.attr.comb=list(weight="sum"))
connected.pre.serrata <- induced_subgraph(pre.serrata, pre.serrata.vert_ids)
connected.simplified.pre.serrata <- simplify(connected.pre.serrata)
pre.serrata <- colleganza.slice(to=1261)
V(pre.serrata)$betweenness <- betweenness(pre.serrata)
V(pre.serrata)$color <- "yellow"
V(pre.serrata)[V(pre.serrata)$name %in% great.council.families]$color <- rgb(0.7,0,0,0.5)
plot(pre.serrata, vertex.size=V(pre.serrata)$betweenness/200, vertex.color=V(pre.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza graph, pre-serrata")
pre.serrata.components <- igraph::components(pre.serrata, mode="weak")
pre.serrata.biggest_cluster_id <- which.max(pre.serrata.components$csize)
pre.serrata.vert_ids <- V(pre.serrata)[pre.serrata.components$membership == pre.serrata.biggest_cluster_id]
connected.pre.serrata <- induced_subgraph(pre.serrata, pre.serrata.vert_ids)
connected.simplified.pre.serrata <- simplify(connected.pre.serrata)
plot(connected.simplified.pre.serrata)
E(connected.simplified.pre.serrata)$weight <- 1
simplify(connected.simplified.pre.serrata,edge.attr.comb=list(weight="sum"))
connected.simplified.pre.serrata <- simplify(connected.simplified.pre.serrata,edge.attr.comb=list(weight="sum"))
pre.serrata.communities <- cluster_edge_betweenness(connected.simplified.pre.serrata)
simplify(connected.simplified.pre.serrata,edge.attr.comb=list(weight="sum"))
for.communities.pre.serrata <- simplify(connected.simplified.pre.serrata,edge.attr.comb=list(weight="sum"))
cluster_edge_betweenness(for.communities.pre.serrata)
pro.communities.pre.serrata <- simplify(connected.simplified.pre.serrata,edge.attr.comb=list(weight="sum"))
pre.serrata.communities <- cluster_edge_betweenness(pro.communities.pre.serrata)
E(connected.simplified.pre.serrata)$weight <- 1
pro.communities.pre.serrata <- simplify(connected.simplified.pre.serrata,edge.attr.comb=list(weight="sum"))
simplify(connected.simplified.pre.serrata,edge.attr.comb=list(weight="sum"))
cluster_edge_betweenness(pro.communities.pre.serrata)
pre.serrata.communities <- cluster_edge_betweenness(pro.communities.pre.serrata)
plot(pre.serrata.communities, pro.communities.pre.serrata, vertex.size=V(pre.serrata)$betweenness/200, vertex.color=V(pre.serrata)$color, edge.arrow.size=0.5, edge.curved=0.1, edge.color="grey", main="Colleganza communities, pre-serrata")
pre.serrata.communities
pre.serrata.communities[3]
pre.serrata.communities[]
4
pre.serrata.communities[4]
pre.serrata.communities[5]
pre.serrata.communities[6]
pre.serrata.communities[7]
